# TarotApp 仕様書

## 概要
シンプルなタロット占いアプリ（iOS / SwiftUI）

## 基本仕様

### カード
- **大アルカナのみ（22枚）**
- **逆位置なし**（正位置のみ）
- **絵文字で表現**

### 占い方法
- **ワンオラクル（1枚引き）**

### カテゴリ
占う前にカテゴリを選択：
- 恋愛
- 仕事
- 金運
- 健康
- 総合運

### 機能
- カードをシャッフルして1枚引く（ランダム）
- **AIが結果を生成**（OpenAI API）
- **履歴保存**（過去の占い結果を見れる）

---

## カード一覧（大アルカナ22枚）

| 番号 | カード名 | 絵文字 |
|------|----------|--------|
| 0 | 愚者 | 🃏 |
| 1 | 魔術師 | 🎩 |
| 2 | 女教皇 | 🌙 |
| 3 | 女帝 | 👑 |
| 4 | 皇帝 | 🏰 |
| 5 | 教皇 | 📿 |
| 6 | 恋人 | 💕 |
| 7 | 戦車 | 🏎️ |
| 8 | 力 | 🦁 |
| 9 | 隠者 | 🏔️ |
| 10 | 運命の輪 | 🎡 |
| 11 | 正義 | ⚖️ |
| 12 | 吊るされた男 | 🙃 |
| 13 | 死神 | 💀 |
| 14 | 節制 | 🏺 |
| 15 | 悪魔 | 😈 |
| 16 | 塔 | 🗼 |
| 17 | 星 | ⭐ |
| 18 | 月 | 🌕 |
| 19 | 太陽 | ☀️ |
| 20 | 審判 | 📯 |
| 21 | 世界 | 🌍 |

---

## 画面構成

### ナビゲーション
- **TabView**で下部にタブバー
  - 左：🏠 ホーム
  - 右：📜 履歴

---

### 1. ホーム画面

```
┌─────────────────────────┐
│                         │
│    🔮 タロット占い       │
│                         │
│  今日は何を占いますか？   │
│                         │
│   ┌─────────────────┐   │
│   │   💕 恋愛       │   │
│   └─────────────────┘   │
│   ┌─────────────────┐   │
│   │   💼 仕事       │   │
│   └─────────────────┘   │
│   ┌─────────────────┐   │
│   │   💰 金運       │   │
│   └─────────────────┘   │
│   ┌─────────────────┐   │
│   │   💪 健康       │   │
│   └─────────────────┘   │
│   ┌─────────────────┐   │
│   │   🌟 総合運     │   │
│   └─────────────────┘   │
│                         │
├─────────────────────────┤
│  🏠 ホーム  │  📜 履歴  │
└─────────────────────────┘
```

- タイトル「🔮 タロット占い」
- メッセージ「今日は何を占いますか？」
- めっせーじについてはふくすうぱたーんよういしておく.
- カテゴリ選択ボタン（5つ）
- カテゴリ選択 → 占い画面に遷移

---

### 2. 占い画面
- 選んだカテゴリの表示
- カードの裏面
- 「カードを引く」ボタン
- カテゴリ選択画面にもどる{戻るボタン}
- タップ → 結果画面に遷移

---

### 3. 結果画面
- カード（絵文字＋名前）
- カードの意味説明
- AIによるかいせつ(OpenAIAPIをしようする)
- 「もう一度占う」ボタン
- 「ホームに戻る」ボタン


---

### 4. 履歴画面
- 過去の占い結果一覧
- 日時、カテゴリ、引いたカード
- タップで詳細表示

---

## 技術スタック

| 項目 | 技術 | 学んだDay |
|------|------|-----------|
| UI | SwiftUI | Day1 |
| 画面遷移 | TabView + NavigationStack | Day2 |
| 状態管理 | @State, @Binding | Day2 |
| データ定義 | Struct + Enum | Day1 |
| 履歴保存 | UserDefaults + Codable | Day3 |
| AI生成 | OpenAI API + HTTP通信 | Day3 |

---

## AI連携（OpenAI API）

### 処理フロー
1. ユーザーがカードを引く（ランダム）
2. カード名 + カテゴリをOpenAI APIに送信
3. AIが占い結果の文章を生成
4. 結果画面に表示

### プロンプト例
```
あなたはタロット占い師です。
カード「太陽」が出ました。
カテゴリは「恋愛」です。
このカードの意味を元に、優しく前向きな占い結果を
3〜4文で生成してください。
```

### APIキー管理
- APIキーはアプリ内にハードコードしない
- 環境変数または設定ファイルで管理

---

## ファイル構成

```
TarotApp/
├── TarotAppApp.swift    # エントリーポイント
├── ContentView.swift    # TabView
├── HomeView.swift       # ホーム画面
├── FortuneView.swift    # 占い画面
├── ResultView.swift     # 結果画面
├── HistoryView.swift    # 履歴画面
├── TarotCard.swift      # カードデータ
├── FortuneResult.swift  # 占い結果＋保存処理
└── OpenAIClient.swift   # OpenAI API通信
```

## てんぼう 

DBなどもかつようしてかんりをしてみる
